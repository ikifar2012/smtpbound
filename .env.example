## Docker environment for smtpbound
## smtpbound configuration (.env example)

# Inbound API key (required). Keep this secret.
INBOUND_API_KEY=your_inbound_api_key_here

# SMTP bind address/port inside the app/container
SMTP_HOST=0.0.0.0
SMTP_SECURE=false
# If SMTP_SECURE=true, default port becomes 465 unless overridden
SMTP_PORT=25

# TLS certificate paths (required when SMTP_SECURE=true)
# If using auto ACME, defaults to /certs within the container
# TLS_CERT_PATH=/certs/fullchain.pem
# TLS_KEY_PATH=/certs/privkey.pem

# Optional default From when incoming message lacks From
# Note: Per Inbound docs, the domain in `from` must be owned & verified in your account.
# You may use agent@inbnd.dev for basic tests of new outbound messages.
# DEFAULT_FROM=Relay <relay@example.com>

# Logging level: info | silent
LOG_LEVEL=info

# SMTP AUTH (disabled by default).
# This service is designed to run behind a reverse proxy that handles TLS.
# Enable AUTH (PLAIN/LOGIN) support
SMTP_AUTH_ENABLED=false
# Credentials to accept (only used if SMTP_AUTH_ENABLED=true)
# SMTP_AUTH_USER=relayuser
# SMTP_AUTH_PASS=strongpassword

# Notes per https://docs.inbound.new/api-reference/emails/send-email
# - Ensure your sending domain is verified, or use agent@inbnd.dev for tests
# - Observe rate limits; exceeding limits returns HTTP 429

# --- Auto TLS via acme.sh (DNS validation) ---
# Set ACME_ENABLED=true to have the container issue/renew certs on boot
# Certs will be placed in /certs (mounted to ./secrets/certs by docker-compose)

ACME_ENABLED=false

# Comma or space separated list of domains. First entry is the primary cert name.
# Example: ACME_DOMAINS=mx.example.com,mail.example.com
# ACME_DOMAINS=

# DNS provider for validation, as supported by acme.sh dnsapi (e.g., dns_cf, dns_aws, dns_gd, dns_ali, etc.)
# See https://github.com/acmesh-official/acme.sh/wiki/dnsapi
# ACME_DNS_PROVIDER=

# Optional account email for the CA
# ACME_EMAIL=admin@example.com

# Choose CA: letsencrypt | zerossl | buypass | google
ACME_SERVER=letsencrypt

# Use LE staging environment to avoid rate limits while testing
ACME_STAGING=false

# Key length: rsa bits (e.g., 2048/4096) or set to 'ec-256' and adjust script for ECC
ACME_KEYLENGTH=2048

# Renew when <= this many days remaining
ACME_RENEW_DAYS=30

# External Account Binding (for CAs like ZeroSSL)
# ACME_EAB_KID=
# ACME_EAB_HMAC_KEY=

# Provider-specific credentials are passed via environment variables, for example:
# - Cloudflare: CF_Token or CF_Key+CF_Email
# - AWS Route53: AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY, AWS_REGION
# - See provider docs in acme.sh dnsapi for the exact variables.

# Rate-limit guards (entrypoint throttling)
# Minimum hours between new issue attempts (helps avoid CA rate limits on repeated restarts)
ACME_MIN_ISSUE_INTERVAL_HOURS=24
# Cooldown after a failed issue attempt before trying again
ACME_COOLDOWN_HOURS_ON_FAILURE=6

# --- Cloudflare DNS (dns_cf) ---
# Set the DNS provider and choose ONE auth method: API Token (preferred) or Global API Key (legacy)
# ACME_DNS_PROVIDER=dns_cf

# API Token (recommended): create a token with Zone.DNS:Edit for the zone(s) you issue for
# CF_Token=

# Global API Key (legacy): requires email + key
# CF_Email=
# CF_Key=

# Optional scoping:
# CF_Account_ID=
# CF_Zone_ID=
