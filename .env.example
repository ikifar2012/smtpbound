## Docker environment for smtpbound
## smtpbound configuration (.env example)

# Inbound API key (required). Keep this secret.
INBOUND_API_KEY=your_inbound_api_key_here

# SMTP bind address/port inside the app/container
SMTP_HOST=0.0.0.0
SMTP_SECURE=false
# If SMTP_SECURE=true, default port becomes 465 unless overridden
SMTP_PORT=25

# TLS certificate paths (required when SMTP_SECURE=true)
# If using auto ACME, defaults to /certs within the container
# TLS_CERT_PATH=/certs/fullchain.pem
# TLS_KEY_PATH=/certs/privkey.pem

# Optional default From when incoming message lacks From
# Note: Per Inbound docs, the domain in `from` must be owned & verified in your account.
# You may use agent@inbnd.dev for basic tests of new outbound messages.
# DEFAULT_FROM=Relay <relay@example.com>

# Logging level: info | silent
LOG_LEVEL=info

# SMTP AUTH (disabled by default).
# This service is designed to run behind a reverse proxy that handles TLS.
# Enable AUTH (PLAIN/LOGIN) support
SMTP_AUTH_ENABLED=false
# Credentials to accept (only used if SMTP_AUTH_ENABLED=true)
# SMTP_AUTH_USER=relayuser
# SMTP_AUTH_PASS=strongpassword

# Notes per https://docs.inbound.new/api-reference/emails/send-email
# - Ensure your sending domain is verified, or use agent@inbnd.dev for tests
# - Observe rate limits; exceeding limits returns HTTP 429

# --- TLS via acme.sh deploy-hook docker ---
# The label is used by acme.sh to find the smtpbound container when deploying certs.
# Replace mx.example.com with your primary MX hostname.
DEPLOY_DOCKER_CONTAINER_LABEL=sh.acme.autoload.domain=mx.example.com

# Paths inside the smtpbound container where acme.sh should copy issued certs.
DEPLOY_DOCKER_CONTAINER_KEY_FILE=/certs/privkey.pem
DEPLOY_DOCKER_CONTAINER_CERT_FILE=/certs/cert.pem
DEPLOY_DOCKER_CONTAINER_FULLCHAIN_FILE=/certs/fullchain.pem
DEPLOY_DOCKER_CONTAINER_CA_FILE=/certs/ca.pem
DEPLOY_DOCKER_CONTAINER_RELOAD_CMD=/usr/local/bin/reload-smtpbound.sh

# DNS provider configuration (example: Cloudflare DNS via dns_cf)
ACME_DNS_PROVIDER=dns_cf
CF_Token=changeme
# CF_Email=
# CF_Key=
# CF_Account_ID=
# CF_Zone_ID=

# Optional: wait time (seconds) for certs to appear when SMTP_SECURE=true
# TLS_WAIT_TIMEOUT_SECONDS=60

# DNS provider credentials for acme.sh are supplied when running --issue.
# Example (Cloudflare):
#   export ACME_DNS_PROVIDER=dns_cf
#   export CF_Token=your_dns_api_token
# Then run inside the acme.sh container:
#   docker exec acme.sh env \
#     ACME_DNS_PROVIDER=$ACME_DNS_PROVIDER \
#     CF_Token=$CF_Token \
#     acme.sh --issue -d mx.example.com --dns $ACME_DNS_PROVIDER
# Deploy (after issue/renew):
#   docker exec acme.sh acme.sh --deploy -d mx.example.com --deploy-hook docker
